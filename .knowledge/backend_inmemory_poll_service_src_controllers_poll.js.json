{"is_source_file": true, "format": "JavaScript", "description": "This source file defines the controller functions for managing polls in a web application, handling HTTP requests and WebSocket connections, and delegating core logic to the pollService module.", "external_files": ["../services/poll"], "external_methods": ["pollService.createPoll", "pollService.listPolls", "pollService.getFullPoll", "pollService.vote", "pollService.closePoll", "pollService.addWSClient", "pollService.removeWSClient"], "published": ["exports.createPoll", "exports.listPolls", "exports.getPoll", "exports.vote", "exports.closePoll", "exports.wsHandler"], "classes": [], "methods": [{"name": "createPoll", "description": "Creates a new poll with provided question and options, returns the created poll."}, {"name": "listPolls", "description": "Lists all active polls without including voting results."}, {"name": "getPoll", "description": "Retrieves full details of a specific poll, including voting results."}, {"name": "vote", "description": "Registers a vote on a specific poll by option index."}, {"name": "closePoll", "description": "Closes an active poll, preventing further votes."}, {"name": "wsHandler", "description": "Handles WebSocket connections for real-time poll updates."}], "calls": ["pollService.createPoll", "pollService.listPolls", "pollService.getFullPoll", "pollService.vote", "pollService.closePoll", "pollService.addWSClient", "pollService.removeWSClient"], "search-terms": ["poll controller", "WebSocket poll updates", "poll API endpoints", "pollService integration", "poll vote handling"], "state": 2, "file_id": 14, "knowledge_revision": 29, "git_revision": "", "ctags": [{"_type": "tag", "name": "poll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^    const poll = pollService.createPoll(question, options);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "poll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^  const poll = pollService.closePoll(pollId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "poll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^  const poll = pollService.getFullPoll(pollId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "pollId", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^  const pollId = req.params.id;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "pollService", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^const pollService = require('..\\/services\\/poll');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sendFunc", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^  const sendFunc = (msg) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/controllers/poll.js", "pattern": "/^    const updated = pollService.vote(pollId, optionIndex);$/", "language": "JavaScript", "kind": "constant"}], "hash": "0234fa2078f3576ae44cd5e20f7916f0", "format-version": 4, "code-base-name": "backend_inmemory_poll_service", "filename": "backend_inmemory_poll_service/src/controllers/poll.js", "revision_history": [{"29": ""}]}
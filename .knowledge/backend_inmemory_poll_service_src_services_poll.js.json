{"is_source_file": true, "format": "JavaScript", "description": "This file defines the PollService class for managing polls, including creating polls, listing them, voting, closing polls, and WebSocket client updates. It encapsulates poll data and client communication logic.", "external_files": ["uuid"], "external_methods": ["require('uuid').v4"], "published": ["PollService"], "classes": [{"name": "PollService", "description": "A service class handling poll creation, voting, listing, closing, and real-time WebSocket client updates."}], "methods": [{"name": "createPoll(question, options)", "description": "Creates a new poll with a question and options, assigning a unique ID.", "scope": "PollService", "scopeKind": "class"}, {"name": "listPolls()", "description": "Returns all active (open) polls without vote results.", "scope": "PollService", "scopeKind": "class"}, {"name": "getFullPoll(pollId)", "description": "Retrieves full details of a specific poll including votes by poll ID.", "scope": "PollService", "scopeKind": "class"}, {"name": "vote(pollId, optionIndex)", "description": "Registers a vote for a specified option in a given poll.", "scope": "PollService", "scopeKind": "class"}, {"name": "closePoll(pollId)", "description": "Closes a poll, preventing further votes and notifying clients.", "scope": "PollService", "scopeKind": "class"}, {"name": "addWSClient(sendFunc)", "description": "Registers a WebSocket client send function for real-time updates.", "scope": "PollService", "scopeKind": "class"}, {"name": "removeWSClient(sendFunc)", "description": "Deregisters a WebSocket client send function.", "scope": "PollService", "scopeKind": "class"}, {"name": "notifyClients(message)", "description": "Sends updates to all registered WebSocket clients.", "scope": "PollService", "scopeKind": "class"}, {"name": "stripResults(poll)", "description": "Returns poll data without the votes array, used for listing/sharing.", "scope": "PollService", "scopeKind": "class"}, {"name": "constructor()", "scope": "PollService", "scopeKind": "class", "description": "unavailable"}], "calls": ["require('uuid').v4", "this.notifyClients", "send(JSON.stringify(message))"], "search-terms": ["poll.js", "PollService", "vote method", "WebSocket client updates", "createPoll method"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "PollService", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^class PollService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addWSClient", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  addWSClient(sendFunc) {$/", "language": "JavaScript", "kind": "method", "signature": "(sendFunc)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "closePoll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  closePoll(pollId) {$/", "language": "JavaScript", "kind": "method", "signature": "(pollId)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "createPoll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  createPoll(question, options) {$/", "language": "JavaScript", "kind": "method", "signature": "(question, options)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^module.exports = new PollService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getFullPoll", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  getFullPoll(pollId) {$/", "language": "JavaScript", "kind": "method", "signature": "(pollId)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^      id,$/", "language": "JavaScript", "kind": "field", "scope": "PollService.createPoll.poll", "scopeKind": "class"}, {"_type": "tag", "name": "listPolls", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  listPolls() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "notifyClients", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  notifyClients(message) {$/", "language": "JavaScript", "kind": "method", "signature": "(message)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "removeWSClient", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  removeWSClient(sendFunc) {$/", "language": "JavaScript", "kind": "method", "signature": "(sendFunc)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "stripResults", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  stripResults(poll) {$/", "language": "JavaScript", "kind": "method", "signature": "(poll)", "scope": "PollService", "scopeKind": "class"}, {"_type": "tag", "name": "vote", "path": "/home/kavia/workspace/code-generation/quickpoll-9770c8a4/backend_inmemory_poll_service/src/services/poll.js", "pattern": "/^  vote(pollId, optionIndex) {$/", "language": "JavaScript", "kind": "method", "signature": "(pollId, optionIndex)", "scope": "PollService", "scopeKind": "class"}], "hash": "c96a067133ef955586ede794395177c3", "format-version": 4, "code-base-name": "backend_inmemory_poll_service", "filename": "backend_inmemory_poll_service/src/services/poll.js", "fields": [{"name": "module.exports = new PollService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "id,", "scope": "PollService.createPoll.poll", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}